<html>
<head>
<titleCoworking Around the Globe</title>
<link href="/css/styles.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<script src="//use.typekit.net/uam2aqu.js"></script>
<script src="/underscore/underscore.js"></script>
<script>try{Typekit.load();}catch(e){}</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="/js/main.js" type="text/javascript"></script>
<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBCpWY1y7do3eG1RacDVOkJ91n8SURNN7c"></script>
</head>
<body>

<aside>
	<div class="top-side">
		<div class="side-padding">
			<div class="logo">
				<img src="img/logo.png">
			</div>
			<div class="back">
				<a href="#"><i class="fa fa-arrow-left"></i>Go Back</a>
			</div>
			<div class="city">
        <% if(u.keys(all).length == 1) { %>
            <% u.each(all, function(city) {  %>
				      <h1 id="city-displayed" data-city-id="<%= city.id %>"><%= city.city %></h1>
            <% }); %>
        <% } %>
			</div>
			<div class="search">
				<input type="text" name="spot" class="search-box" onkeyup="filter(this)">
				<div class="search-icon">
					<i class="fa fa-search"></i>
				</div>
			</div>
		</div>
		<hr>
	</div>
	<div class="city-side">
		<div class="side-padding">
			<ul class="cities">
        <% if(u.keys(all).length == 1) { %>
            <% u.each(all, function(city) {  %>
              <% u.each(u.sortBy(city.locations, function(loc) { return loc.order; }), function(loc) {  %>
				        <li>
                  <a href="<%= loc.url %>" target="_blank"><%= loc.name %></a>
				        	<img src="img/marker-white.svg"><span><%= loc.address || "" %></span>
				        </li>
              <% }); %>
            <% }); %>
        <% } %>
			</ul>
		</div>
	</div>
</aside>

<!-- Map Section! -->
<section id="main">
	<section id="cd-google-map">
	<!-- #google-container will contain the map  -->
	<div id="google-container"></div>
	<!-- #cd-zoom-in and #zoom-out will be used to create our custom buttons for zooming-in/out -->
	<div id="cd-zoom-in"></div>
	<div id="cd-zoom-out"></div>
</section>
</section>

<script language="javascript" type="text/javascript">
    var all = <%- JSON.stringify(all) %>;

    function filter(element) {
        var value = $(element).val();

        $(".cities > li").each(function() {
            if ($(this).text().toLowerCase().search(value.toLowerCase()) > -1) {
            	console.log($(this).text());
                $(this).show();
            }
            else {
                $(this).hide();
            }
        });

        $("#content h4").each(function() {
        	if ($(this).text().search(value) > -1) {
            	console.log($(this).text());
                $(this).show();
            }
            else {
                $(this).hide();
            }
        });
    }
</script>
</body>
</html>
